import numpy as np
import matplotlib.pyplot as plt

# Create the figure outside of the loop
plt.figure(figsize=(12, 8))


for i in [5,10,20,30]:

    # Load all_states and all_input
    all_states = np.load('all_states_h' + str(i) + '.npy')
    all_input = np.load('all_input_h' + str(i) + '.npy')
    comp_time = np.load('comp_times_h' + str(i) + '.npy')
    print(comp_time)
    t_states = np.linspace(0, comp_time, len(all_states))
    t_input = np.linspace(0, comp_time, len(all_input))


    # Plotting Position, Velocity, and Acceleration
    plt.subplot(3, 1, 1)
    plt.plot(t_states, all_states[:, 1], label=f'Horizon {i}')
    plt.title('X-axis Position Over Time')
    plt.ylabel('Position (m)')

    plt.subplot(3, 1, 2)
    plt.plot(t_states, all_states[:, 4], label=f'Horizon {i}')
    plt.title('X-axis Velocity Over Time')
    plt.ylabel('Velocity (m/s)')

    plt.subplot(3, 1, 3)
    plt.plot(t_input, all_input[:, 1], label=f'Horizon {i}')
    plt.title('X-axis Acceleration Over Time')
    plt.ylabel('Acceleration (m/sÂ²)')
    plt.xlabel('Computational time (s)')

# Add the legend and show the plot outside of the loop
for i in range(1, 4):
    plt.subplot(3, 1, i)
    plt.legend()

# Adjust the space between subplots
plt.subplots_adjust(hspace=0.5)

plt.show()